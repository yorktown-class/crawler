æ ¸å¿ƒéœ€æ±‚ï¼š

1. é€‰å–3-5ä¸ªä»£è¡¨æ€§çš„æ–°é—»ç½‘ç«™ï¼ˆæ¯”å¦‚æ–°æµªæ–°é—»ã€ç½‘æ˜“æ–°é—»ç­‰ï¼Œæˆ–è€…æŸä¸ªå‚ç›´é¢†åŸŸæƒå¨æ€§çš„ç½‘ç«™æ¯”å¦‚ç»æµé¢†åŸŸçš„é›ªçƒè´¢ç»ã€ä¸œæ–¹è´¢å¯Œç­‰ï¼Œæˆ–è€…ä½“è‚²é¢†åŸŸçš„è…¾è®¯ä½“è‚²ã€è™æ‰‘ä½“è‚²ç­‰ç­‰ï¼‰å»ºç«‹çˆ¬è™«ï¼Œé’ˆå¯¹ä¸åŒç½‘ç«™çš„æ–°é—»é¡µé¢è¿›è¡Œåˆ†æï¼Œçˆ¬å–å‡ºç¼–ç ã€æ ‡é¢˜ã€ä½œè€…ã€æ—¶é—´ã€å…³é”®è¯ã€æ‘˜è¦ã€å†…å®¹ã€æ¥æºç­‰ç»“æ„åŒ–ä¿¡æ¯ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚
2. å»ºç«‹ç½‘ç«™æä¾›å¯¹çˆ¬å–å†…å®¹çš„åˆ†é¡¹å…¨æ–‡æœç´¢ï¼Œç»™å‡ºæ‰€æŸ¥å…³é”®è¯çš„æ—¶é—´çƒ­åº¦åˆ†æã€‚

æŠ€æœ¯è¦æ±‚ï¼š

1. å¿…é¡»é‡‡ç”¨Node.JSå®ç°ç½‘ç»œçˆ¬è™«

2. å¿…é¡»é‡‡ç”¨Node.JSå®ç°æŸ¥è¯¢ç½‘ç«™åç«¯ï¼ŒHTML+JSå®ç°å‰ç«¯ï¼ˆå°½é‡ä¸è¦ä½¿ç”¨ä»»ä½•å‰åç«¯æ¡†æ¶ï¼‰

 ä»£ç ä»“åº“: https://github.com/ya-hong/crawler

# å¼€å‘è¿‡ç¨‹

~~å…¶å®ä¸»è¦è¿˜æ˜¯æŠ„ä»£ç ~~

åˆ—ä¸€ä¸‹é‡åˆ°çš„å‘æˆ–è€…æ„Ÿè§‰é‡è¦çš„éƒ¨åˆ†ã€‚

## js çš„å¼‚æ­¥ç‰¹æ€§

jsä»£ç ä¸æ˜¯é¡ºåºæ‰§è¡Œçš„ç®—æ˜¯æˆ‘é‡åˆ°çš„ç¬¬ä¸€ä¸ªå‘äº†ã€‚ä¹‹å‰åªä¼šå†™c++ï¼Œæ„Ÿè§‰ç¨‹åºé¡ºåºæ‰§è¡Œæ˜¯å¤©ç»åœ°ä¹‰çš„äº‹æƒ…ã€‚è°ƒè¯•çš„æ—¶å€™æˆ‘å‘ç°æœ‰ç‚¹ä¸å¯¹åŠ²ï¼Œæ€ä¹ˆç¨‹åºè¾“å‡ºé¡ºåºæ˜¯åç€çš„ğŸ¤®ã€‚

ç„¶åæˆ‘äº†è§£äº†ä¸€ä¸‹å¼‚æ­¥æœºåˆ¶ï¼šhttps://blog.csdn.net/qq_22855325/article/details/72958345

>  å¼‚æ­¥è¿è¡Œæœºåˆ¶å¤§è‡´å¦‚ä¸‹
>
> 1. æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ
> 2. ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª"ä»»åŠ¡é˜Ÿåˆ—"ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨"ä»»åŠ¡é˜Ÿåˆ—"ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶
> 3. ä¸€æ—¦"æ‰§è¡Œæ ˆ"ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–"ä»»åŠ¡é˜Ÿåˆ—"ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚
> 4. ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š

```javascript
console.log("start");
for (i = 1; i <= 10; ++i) {
    setTimeout(function() {
        console.log("sleep " + i);
    }, 1000);
}
setTimeout(function(){
    console.log("sleep1000");
},1000);
console.log("end");

```

è¾“å‡ºï¼š

```
start
end
(è¿™é‡Œ-1s)
sleep 11
sleep 11
sleep 11
sleep 11
sleep 11
sleep 11
sleep 11
sleep 11
sleep 11
sleep 11
sleep1000
```

æˆ‘çš„ç†è§£æ˜¯ï¼Œå…ˆæ‰§è¡Œäº†`console.log("start")`ã€‚ç„¶åæ‰§è¡Œåæ¬¡`setTimeout`å‡½æ•°ï¼ŒæŠŠ`callback`ä¸¢è¿›é˜Ÿåˆ—å¹¶å¼€å§‹è®¡æ—¶ã€‚å†æ‰§è¡Œä¸€æ¬¡`setTimeout`å‡½æ•°ï¼ŒæŠŠ`callback`ä¸¢è¿›é˜Ÿåˆ—å¹¶å¼€å§‹è®¡æ—¶ã€‚æ‰§è¡Œ`console.log("end")`ã€‚ç„¶åç­‰å¾…1sæ‰€æœ‰è®¡æ—¶å…¨éƒ¨ç»“æŸï¼Œä¸”æ­¤æ—¶i=11, æ‰§è¡Œæ‰€æœ‰çš„`console.log`å‡½æ•°ã€‚æ•´ä¸ªè¿‡ç¨‹ç”¨æ—¶å¤§æ¦‚1sã€‚

è¿™é‡Œå°±ä½“ç°äº†javascriptçš„ä¼˜åŠ¿ï¼Œè™½ç„¶ä»–åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»£ç ï¼Œä½†æ˜¯å®ƒè¿˜æœ‰å…¶ä»–çº¿ç¨‹æ¥æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œç”¨å¼‚æ­¥çš„æ–¹å¼å¯ä»¥åœ¨è¿›è¡Œè€—æ—¶ä»»åŠ¡æ—¶æ‰§è¡Œå…¶ä»–ä»£ç ã€‚å¦‚æœè¿™æ®µä»£ç ç”¨c++å†™å°±è‚¯å®šè¦ç­‰ä¸Š11säº†ã€‚

## å›è°ƒå‡½æ•°

JSçš„å‡½æ•°è²Œä¼¼å’Œå…¶ä»–æ•°æ®ç±»å‹æ²¡æœ‰åŒºåˆ«ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼å¯ä»¥ä½¿éƒ¨åˆ†çš„å¼‚æ­¥å‡½æ•°æŒ‰é¡ºåºæ‰§è¡Œã€‚ 

## eval() å‡½æ•°

ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å‡½æ•°ï¼Œ`eval(s)` å¯ä»¥æŠŠså½“ä½œä»£ç æ‰§è¡Œã€‚è™½ç„¶å®ƒå¥½åƒæœ‰æ•ˆç‡ä½ï¼Œä¸å®‰å…¨çš„ç¼ºç‚¹ï¼Œä½†æ˜¯åœ¨çˆ¬è™«å®éªŒé‡Œæˆ‘è§‰å¾—è¿™ä¸ªå‡½æ•°ä½¿å°è£…ä»£ç å˜å¾—å¾ˆæ–¹ä¾¿ã€‚

## request çš„ä½¿ç”¨

ç”¨æ¥æ‹¿åˆ°ç½‘é¡µæºç ã€‚

## cheerio çš„ä½¿ç”¨

ç”¨cheerioåŠ è½½ç½‘ç«™ç§å­é¡µé¢ï¼Œå¯ä»¥æ–¹ä¾¿çš„æœç´¢å‡ºæ–°é—»é“¾æ¥ã€‚åŠ è½½æ–°é—»é¡µé¢ä¹Ÿå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬æŸ¥æ‰¾å…¶ä¸­çš„å„ç§å…ƒç´ ã€‚

ä¸€äº›ç”¨æ³•ï¼š

+   åŠ è½½ç½‘é¡µ

    ```javascript
    var $ = myCheerio.load(html, { decodeEntities: true });
    ```

+   æŸ¥æ‰¾æ ‡ç­¾ï¼ˆä¾‹å¦‚metaæ ‡ç­¾ï¼‰

    ```javascript
    $('meta');
    ```

+   æŸ¥æ‰¾æŸä¸ªå±æ€§çš„æ ‡ç­¾

    ```javascript
    $('meta[name="keyword"]');
    ```

+   æŸ¥æ‰¾æ ‡ç­¾ä¸‹çš„æ ‡ç­¾ï¼ˆä¾‹å¦‚divæ ‡ç­¾ä¸‹çš„aæ ‡ç­¾ï¼‰

    ```javascript
    $('div a');
    ```

    æŸ¥æ‰¾divä¸‹ä¸ºaçš„å­æ ‡ç­¾

    ```javascript
    $('div>a');
    ```

+   æŸ¥æ‰¾æŸå±æ€§å€¼ï¼ˆä¾‹å¦‚nameå±æ€§ä¸ºkeywordsçš„metaæ ‡ç­¾çš„contentå±æ€§çš„å±æ€§å€¼ï¼‰

    ```javascript
    $('meta[name="keywords"]').eq(0).attr("content");
    ```

+   æ•´åˆæ–‡æœ¬ä¿¡æ¯

    ```javascript
    $('div[class="article"]').text();
    ```



## mysql æ•°æ®åº“çš„ä½¿ç”¨

å…¶å®æˆ‘ç¬¬ä¸€å¤©å°±çˆ¬äº†ä¸€äº›æ•°æ®äº†ï¼Œä½†æ˜¯ä¸çŸ¥é“æ€ä¹ˆæœç´¢ã€‚æŸ¥åˆ°elasticsearchå¯ä»¥å®ç°æœç´¢ä½†æ˜¯ä¸€ç›´æ²¡ææ˜ç™½æ€ä¹ˆç”¨ï¼Œå°±ä¸€ç›´æç½®äº†ã€‚

æœ¬æ¥æˆ‘æ˜¯æŒ‰ç…§æ ‡é¢˜å­˜æˆä¸€ä¸ªä¸ªæ–‡ä»¶çš„ï¼ˆhttps://github.com/ya-hong/crawler/blob/master/del/baidunews.jsï¼‰ï¼Œä½†æ˜¯æŠŠæ•°æ®ä¿å­˜åˆ°æ•°æ®åº“é‡Œæœ‰å¾ˆå¤šå¥½å¤„ã€‚æ˜¯ç›´æ¥è§£å†³äº†æœç´¢çš„é—®é¢˜ï¼Œè€Œä¸”æ˜¯æŸ¥è¯¢ç¼–ç ã€æ ‡é¢˜ã€ä½œè€…ã€æ—¶é—´ã€å…³é”®è¯ã€æ‘˜è¦ã€å†…å®¹ã€æ¥æºç­‰ä¿¡æ¯æ¯”åœ¨æ–‡ä»¶ä¸­é‡æ–°æŸ¥æ‰¾è¦æ–¹ä¾¿ä¸”é«˜æ•ˆã€‚

åœ¨ä»£ç ä¸­è¿æ¥æ•°æ®åº“è¦ç”¨åˆ°mysqlåŒ…ã€‚ä¸»è¦ç”¨åˆ°çš„å‡½æ•°ï¼š

```javascript
var pool = mysql.createPool({
    host: '127.0.0.1',
    user: '',
    password: '',
    database: ''
});
pool.getConnection(function(err, conn) {//è¿æ¥
    if (err) {
        //é”™è¯¯å¤„ç†
    }
    else {
    	conn.query(sql, sqlparam,function(qerr, vals, fields) {//sql ä¸ºæ•°æ®åº“å‘½ä»¤,sqlparamä¸ºå‚æ•°
        	conn.release();
        });
    }
}
```

ä»£ç ï¼šhttps://github.com/ya-hong/crawler/blob/master/mysql.js

## æ­£åˆ™è¡¨è¾¾å¼

åœ¨ç§å­é¡µé¢ä¸Šç”¨cheerioæ‰¾åˆ°çš„é“¾æ¥å¯èƒ½ä¼šåŒ…å«éæ–°é—»é¡µé¢çš„é“¾æ¥ã€‚å¦‚æœèƒ½æ‰¾åˆ°æ–°é—»é¡µé¢å’Œéæ–°é—»é¡µé¢é“¾æ¥çš„åŒºåˆ«ï¼Œå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼å°†å®ƒä»¬åŒºåˆ†å¼€æ¥ã€‚

ä¸€å¼€å§‹çœ‹åˆ°æœ‰ç‚¹å¤´å¤§ï¼Œä½†æ˜¯å®é™…ä¸Šç½‘é¡µé“¾æ¥ä¸­åªæœ‰å­—æ¯ã€æ•°å­—ã€å†’å·å’Œæ–œæ ã€‚è¿ç©ºæ ¼å’Œæ¢è¡Œéƒ½æ²¡æœ‰ï¼Œè¿™æ ·å®é™…ä¸Šç”¨ä¸åˆ°å¤ªå¤šè¯­æ³•ã€‚

æ­£åˆ™æè¿°äº†ä¸€ç§å­—ç¬¦ä¸²åŒ¹é…çš„æ¨¡å¼ã€‚åˆ—ä¸€ä¸‹æˆ‘ç”¨åˆ°çš„è¯­æ³•ï¼š

|å­—ç¬¦ | å«ä¹‰|
| ------ | -------------------- |
|      \  |  è½¬ä¹‰             |
| .      | åŒ¹é…ä¸€ä¸ªéæ¢è¡Œå­—ç¬¦   |
| {n, m} | åŒ¹é…å‰ä¸€ä¸ªå­è¡¨è¾¾å¼nåˆ°mæ¬¡ |
|   {n, }       |åŒ¹é…å‰ä¸€ä¸ªå­è¡¨è¾¾å¼è‡³å°‘næ¬¡                             |
| *      | ç­‰ä»·äº{0,}           |
| ^      | åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®                  |
| $      |            åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®          |
| (str)     |   åŒ¹é…strï¼Œä¸”strä¸ºä¸€ä¸ªå­è¡¨è¾¾å¼                   |
| [a-z]  |     åŒ¹é…'a'-'z'çš„ä¸€ä¸ªå­—æ¯                 |
| [0,9]  |            åŒ¹é…'0'-'9'çš„ä¸€ä¸ªæ•°å­—          |

ä¸€ä¸ªæµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼çš„ç½‘ç«™ï¼šhttp://c.runoob.com/front-end/854

jsä¸­çš„æ­£åˆ™è¡¨è¾¾å¼è¦å†™åœ¨`/       /` ä¸­ï¼Œä¾‹å¦‚ï¼š

```javascript
url_reg = /\/\/www\.sohu\.com\/a\/.*/
```

å¯ä»¥åŒ¹é…

```
//www.sohu.com/a/391299036_114988?spm=smpc.news-home.top-news2.1.1587894845483yLbRjQ5

//www.sohu.com/a/391306114_115362?spm=smpc.news-home.top-news3.2.1587894845483yLbRjQ5

//www.sohu.com/a/391335217_161795?spm=smpc.news-home.top-news3.4.1587894845483yLbRjQ5
```



## express æ¡†æ¶

è¯´å¥½å°½é‡ä¸ä½¿ç”¨ä»»ä½•æ¡†æ¶ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯ä¸å¤ªä¼šæ€ä¹ˆå†™htmlä»£ç ã€‚htmlè¿æ¥æ•°æ®åº“å°±ä¸ä¼šäº†ï¼Œè¿˜æ˜¯è¦æŠ„è€å¸ˆä»£ç -_-||ã€‚

`express -e search_site` ç”Ÿæˆä¸€ä¸ªsearch_siteæ–‡ä»¶å¤¹ï¼Œå°†[mysql.js](https://github.com/ya-hong/crawler/blob/master/mysql.js)æ‹·è´è¿›æ–‡ä»¶å¤¹ï¼Œå†ä¿®æ”¹[`search_site/routes/index.js`](https://github.com/ya-hong/crawler/blob/master/search_site/routes/index.js) ,æŠŠ[search.html](https://github.com/ya-hong/crawler/blob/master/search_site/public/search.html)æ‹·è´è¿›publicæ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å°±æŠ„å®Œäº†ä»£ç ã€‚

ç”¨nodeè¿è¡Œ`search_site/bin/www`å°±å¯ä»¥è®¿é—®`localhost:3000/search.html`æ¥æœç´¢äº†ã€‚



# ä»£ç å®ç°

## æœ€åˆçš„ä»£ç 

https://github.com/ya-hong/crawler/blob/master/del/baidunews.js

å› ä¸ºè¢«å¼‚æ­¥ææ‡µäº†ï¼Œæˆ‘è¿™é‡Œçš„callbackå®Œå…¨æ˜¯ä¹±å†™çš„ã€‚

åŸºæœ¬å°±æ˜¯ç®€å•çš„ç”¨requestè·å–htmlï¼Œå†ç”¨cheerioæŸ¥æ‰¾æ ‡é¢˜ã€é“¾æ¥å’Œæ­£æ–‡ï¼Œç„¶åå†™å…¥æ–‡ä»¶ã€‚

### ç¨å¾®æ”¹è¿›ä¸€ç‚¹



# æˆæœå±•ç¤º



# å­¦ä¹ ä½“ä¼š



